---
# Frigate configuration
frigate_mqtt_enabled: True
# Frigate MQTT Host is name of MQTT container running on the same host
# Only defined like this since communication through traefik doesn't
# work over SSL
frigate_mqtt_host: "mqtt_mosquitto"
frigate_mqtt_port: "{{ mqtt_mosquitto_port_tcp }}"
frigate_mqtt_user: "{{ mqtt_mosquitto_auth_credentials[0].username }}"
frigate_mqtt_password: "{{ mqtt_mosquitto_auth_credentials[0].password }}"

frigate_go2rtc:
  streams:
    front_door:
      - "rtsp://home-assistant-001.hq1.chuanguyen.ca:8554/front-door"
      - "ffmpeg:front_door#audio=opus"
    front_door_substream:
      - "rtsp://home-assistant-001.hq1.chuanguyen.ca:8554/front-door-sub"
  # Necessary for establishing webrtc connection via live view
  webrtc:
    candidates:
      - frigate-001.hq1.chuanguyen.ca:8555
      - stun:8555

frigate_cameras:
  front_door: # <------ Name the camera
    ffmpeg:
      inputs:
        - path: "rtsp://127.0.0.1:8554/front_door" # Restream connection
          input_args: "preset-rtsp-restream"
          roles:
            - record
        - path: "rtsp://127.0.0.1:8554/front_door_substream" # Restream connection
          input_args: "preset-rtsp-restream"
          roles:
            - detect
      output_args:
        record: "preset-record-generic-audio-copy"
    detect:
      enabled: True # <---- disable detection until you have a working camera feed
      width: 640 # <---- update for your camera's resolution
      height: 360 # <---- update for your camera's resolution
    record:
      enabled: True
      events:
        required_zones:
          - front_yard
        retain:
          default: 10
          mode: motion
          objects:
            person: 15
    snapshots:
      enabled: True
      required_zones:
        - front_yard
    objects:
      track:
        - person
        - cat
        - dog
    zones:
      front_yard:
        coordinates: 0,117,0,360,251,360,482,360,478,336,577,322,640,102,585,66,416,52,311,44,25,84
    motion:
      mask:
        - 105,0,220,0,445,0,640,0,604,44,299,23,0,80,0,0
        - 640,279,608,294,544,250,563,161,640,139
    live:
      stream_name: "front_door"

frigate_detectors:
  cpu1:
    type: "cpu"
    num_threads: 2

frigate_detect:
  width: 1280
  height: 720
  fps: 5
  enabled: True
  # Optional: Number of frames without a detection before Frigate considers an object to be gone. (default: 5x the frame rate)
  max_disappeared: 25
  # Optional: Configuration for stationary object tracking
  stationary:
    # Optional: Frequency for confirming stationary objects (default: shown below)
    # When set to 0, object detection will not confirm stationary objects until movement is detected.
    # If set to 10, object detection will run to confirm the object still exists on every 10th frame.
    interval: 0
    # Optional: Number of frames without a position change for an object to be considered stationary (default: 10x the frame rate or 10s)
    threshold: 50

frigate_ui:
  live_mode: "mse"
  use_experimental: False
  time_format: "24hour"
  date_style: "short"
  time_style: "medium"

### Logger
frigate_logger:
  default: "info"
