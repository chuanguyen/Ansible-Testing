### {{ ansible_managed }}
# Configuration file for ddclient generated by debconf
#
# /etc/ddclient.conf

## Global
use=web
web-skip="IP Address"
daemon={{ ddclient_daemon }}
syslog=yes
pid=/var/run/ddclient.pid
protocol={{ ddclient_protocol }}
server={{ ddclient_server }}
ssl=yes

### Cloudflare
# Specifying both login and password requires using the global Cloudflare token
# v3.9.1 doesn't yet include PR102 supporting granular Cloudflare API tokens
# https://github.com/ddclient/ddclient/pull/102
# https://github.com/ddclient/ddclient/issues/272
{% for ddns_domains_to_update in dns_provider_ddns_domains_to_update %}
login='{{ ddns_domains_to_update.dns_provider_username }}'
password='{{ ddns_domains_to_update.dns_provider_token }}'
zone={{ ddns_domains_to_update.zone }}
{{ ddns_domains_to_update.sub_domains | join(',') }}
{% endfor %}
